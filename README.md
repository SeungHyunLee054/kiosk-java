# Kiosk

## 기능
### 1. 카테고리를 선택하여 해당 카테고리의 메뉴를 출력하는 기능
### 2. 메뉴를 선택하여 장바구니에 담는 기능
### 3. 장바구니에 담긴 메뉴들을 주문하는 기능
    - 할인 유형에 따라 결제 금액이 달라짐
  
## 기능 Flow
1. 카테고리 종류를 출력
- 카테고리를 선택, 카테고리는 enum으로 관리, enum의 value 값과 입력값을 비교하여 해당 카테고리값 전달
- menu 객체에 저장된 카테고리 값과 비교하여 해당 카테고리의 메뉴를 출력
- 0을 입력하면 kiosk 종료
2. 메뉴를 출력
- 메뉴의 id 값을 입력값과 비교하여 해당 메뉴를 선택
- 0을 입력하면 카테고리 선택으로 이동
3. 장바구니 담기
- 위에서 선택한 메뉴를 장바구니에 Map을 통해 담음
- 같은 메뉴를 한번 더 고를 시 value(quantity) 값 증가
- 장바구니에 값이 담기면 주문관련 내용이 콘솔에 추가로 출력
4. 장바구니에 담긴 메뉴를 주문
- 메뉴의 값과 갯수를 곱해 총 주문 가격을 구함
- 할인 유형을 선택하여 주문 가격에 할인 비율만큼 차감

## 트러블 슈팅
1. 세세한 설계를 나누지 않고 기능 구현을 우선시하다 보니 객체에 맞지 않거나 메소드에 맞지 않는 역할을 하는 경우가 발생
- 해결 방법
  - 객체와 메소드에 알맞게 역할을 분담
2. StackOverflowError - 객체 간에 서로 참조하고 있기 때문에 발생, 원인을 콕 집어 찾는데 헤매었음
- 해결 방법
  - 위에 적었다시피 객체 간에 같은 속성을 서로 참조하고 있기 때문에 발생했다. 객체를 한번만 생성한 후 주입받는 방식으로 변경
3. **Map에서 remove 메서드를 사용했을 때 ConcurrentModificationException 오류 발생**
- 향상된 for문이 iterator 방식으로 순회하는 방법을 사용한다.
- 이 for문 안에서 remove 메서드를 호출하면 동기화 문제가 발생한다. remove 메서드에서 노드를 통해 iterator를 통해서 해당 노드를 제거하는데 향상된 for문의 iterator가 가리키는 값과 다르기 때문에 발생한다. (remove 메서드의 iterator가 노드를 제거하고 modCount가 변경되었기 때문)
- 해결 방법
    - 해당 Map 객체를 new로 새로 생성해 줌
    - 다른 방안으로 copy를 해서 향상된 for문을 돌리면 가능하다. (LinkedList로 key를 따로 저장하여 향상된 for문을 돌릴 수도 있음)
    - 또는 ConcurrentHashMap을 사용하여 쓰레드를 하나로 제한을 한다.
4. 메서드 네이밍
- 메서드명을 지을 때 해당 메서드가 행하는 것을 짓는데 이 네이밍과 알맞지 않게 메서드를 작성하면 코드 가독성이 떨어지고 OOP에 알맞지 않게 된다.
- 해결 방법
    - 해당 메서드가 행하는 것에 알맞게 네이밍을 변경한다.
    - 해당 메서드를 네이밍에 알맞게 변경한다.

 ## 기술 스택
 - Java(ver. 17)

## IDE
- Intellij Idea
